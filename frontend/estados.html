<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Estados de Cuenta - Clínica EMERCO</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
</head>
<body>
  <header>
    <div class="logo">
      <img src="logo.png" alt="Logo" style="height:2rem;" />
      <div>
        <strong>Clínica EMERCO</strong><br>
        <small>Sistema de Gestión de Afiliados</small>
      </div>
    </div>
    <nav>
      <ul>
        <li><a href="index.html">Dashboard</a></li>
        <li><a href="buscar.html">Búsqueda</a></li>
        <li><a href="gestionar.html">Gestión</a></li>
        <li class="active"><a href="estados.html">Estados de Cuenta</a></li>
      </ul>
    </nav>
    <div class="status">
      <i class="fa-solid fa-wave-square"></i>
      <span>Sistema Activo</span>
    </div>
  </header>

  <main>
    <h1>Estados de Cuenta</h1>
    <p>Consulta y gestiona los estados de cuenta y comprobantes de pago</p>

    <!-- Tarjetas resumen -->
    <div class="dashboard-cards" id="estadisticasEstados">
      <!-- ... igual que antes ... -->
    </div>

    <!-- Filtros -->
    <section class="card" style="margin-top: 2rem;">
      <h2>Consultar Estado de Cuenta</h2>
      <form id="estadoForm" style="display: flex; gap: 1rem; flex-wrap: wrap;">
        <div>
          <label for="afiliadoSelect">Afiliado</label>
          <select id="afiliadoSelect">
            <option value="">Seleccionar afiliado</option>
          </select>
        </div>
        <button type="submit" class="btn-primary"><i class="fa-solid fa-search"></i> Consultar</button>
      </form>
      <!-- Filtro por texto y botón PDF -->
      <div style="margin-top:1rem; display:flex; justify-content: space-between; align-items: center;">
        <input id="filtroTabla" type="text" placeholder="Filtrar por período, estado..." style="padding: 0.4rem 1rem; border-radius: 4px; border: 1px solid #ccc;"/>
        <button id="descargarPdf" class="btn-primary" style="margin-left: 1rem;"><i class="fa-solid fa-file-pdf"></i> Descargar PDF</button>
      </div>
    </section>

    <!-- Resultados (Estado de Cuenta Detallado: TABLA GRANDE) -->
    <section class="card" style="margin-top: 1.5rem;">
      <h2>Detalle del Estado de Cuenta</h2>
      <div id="estadoDetalle">
        <p>Selecciona un afiliado para ver todos sus períodos y movimientos</p>
      </div>
    </section>
  </main>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.2/jspdf.plugin.autotable.min.js"></script>
  <script src="estados.js"></script>
</body>
</html>
